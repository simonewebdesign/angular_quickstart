<!-- index.html -->
<html>
  <head>
    <title>Angular 2 Quickstart</title>
    <script src="/dist/es6-shim.js"></script>
  </head>
  <body>
  
    <h1>Oh hai</h1>

    <!-- The app component created in app.es6 -->
    <my-app-component></my-app-component>

    <script>
      // Rewrite the paths to load the files
      System.paths = {
        'angular2/*':'/angular2/*.js', // Angular
        'rtts_assert/*': '/rtts_assert/*.js', //Runtime assertions
        'app': 'app.es6', // The my-app component
        'components/*': 'app/components/*.js',
        'decorators/*': 'app/decorators/*.js',
        'services/*': 'app/services/*.js',
        'stores/*': 'app/stores/*.js',
        'lib/*': 'lib/*.js'
      };

      // Kick off the application
      System.import('app');
    </script>

    <script>
    (function () {
      var ws = new WebSocket("ws://localhost:1337");

      ws.onopen = function (ev) {
        console.log('Connection opened.');
        this.send('medications');
      }

      ws.onmessage = function (ev) {
        console.log('Response from server: ' + ev.data);
      }

      ws.onclose = function (ev) {
        console.log('Connection closed.');
      }

      ws.onerror = function (ev) {
        console.log('An error occurred. Sorry for that.');
      }

    })();
    </script>
    
  </body>
</html>
